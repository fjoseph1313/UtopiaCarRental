<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Utopia Car Rental</title>
        <h:outputStylesheet library="css" name="utopia.css" />
    </h:head>
    <h:body>

        <h:form>
            <h:commandButton action="#{logOutBean.logout}" value="Logout" />
        </h:form>

        <p><H1>UTOPIA CAR RENTAL</H1></p><br />
        <p><h:link outcome="index" value="HOME" /></p>
        <h2> CARS REGISTRATION </h2>
        <h:outputLabel value="CAR REGISTRATION FORM"/><br /><br />
        <h:form styleClass="jsfcrud_list_form">


            <h:panelGrid columns="3" border="0" bgcolor="skyblue">

                <h:outputLabel value="Car Model :"/>
                <h:inputText value="#{CarBean.car.carModel}" 
                             required="true"
                             requiredMessage="**Model Required!"
                             id="carMod"/>
                <h:message class="error" for="carMod"/>

                <h:outputLabel value="Car Condition :"/>
                <h:inputText value="#{CarBean.car.carCondition}"
                             required="true"
                             requiredMessage="**Condition Required!"
                             id="carCon"/>
                <h:message class="error" for="carCon"/>

                <h:outputLabel value="YOM(yyyy) :"/>
                <h:inputText value="#{CarBean.car.carManufacturingYear}" id="year" required="true"
                             requiredMessage="**Must Enter a Year"
                             validatorMessage="Range must be between 1986 and 2020!"
                             converterMessage="**Please Enter a Year, No String allowed">
                    <f:validateDoubleRange minimum="1986" maximum="2020" />
                </h:inputText>
                <h:message class="error" for="year"/>                

                <h:outputLabel value="Car Seats :"/>
                <h:inputText value="#{CarBean.car.noOfSeats}" id="seat"/>
                <h:message class="error" for="seat"/>

                <h:outputLabel value="Location :"/>
                <h:selectOneMenu value="#{CarBean.car.location}">
                    <f:selectItems value="#{LocationBean.locationList}" 
                                   var ="location" itemValue="#{location.id}"
                                   itemLabel="#{location.location}" /> 
                </h:selectOneMenu><br />

                <h:outputLabel value="Price Per Hour :$"/>
                <h:inputText value="#{CarBean.car.pricePerHour}"/>
                <h:message class="error" for=""/>

                <h:outputLabel value="Car Category :"/>
                <h:selectOneMenu value="#{CarBean.catId}">
                    <f:selectItems value="#{CategoryBean.categories}" 
                                   var ="cat" itemValue="#{cat.id}"
                                   itemLabel="#{cat.categoryName}" />
                </h:selectOneMenu>
                <h:message class="error" for=""/>

                <f:facet name="footer">
                    <h:panelGroup style="display:block; text-align:center">
                        <h:commandButton action="#{CarBean.registerCar}" value="Register Car"/>
                    </h:panelGroup>
                </f:facet>        
            </h:panelGrid>


        </h:form>
        <hr />
        <h2>UTOPIA's REGISTERED CARS</h2>
        <h:dataTable var="car" value="#{CarBean.carList}"
                     columnClasses="oddColumn, evenColumn"
                     rowClasses="categoryOddRow,categoryEvenRow"
                     headerClass="columnHeader">
            <h:column >
                <f:facet name="header" >MODEL</f:facet>
                #{car.carModel} - #{car.noOfSeats}Seats.
            </h:column>
            <h:column>
                <f:facet name="header" >CONDITION</f:facet>
                    #{car.carCondition}
            </h:column>
            <h:column>
                <f:facet name="header" >YOM</f:facet>
                    #{car.carManufacturingYear}
            </h:column>
            <h:column>
                <f:facet name="header" >CATEGORY</f:facet>
                    #{car.category.categoryName}
            </h:column>
            <h:column>
                <f:facet name="header" >STATUS</f:facet>
                    #{car.status}
            </h:column>
            <h:column>
                <f:facet name="header" >PRICE(PHR)</f:facet>
                $#{car.pricePerHour}
            </h:column>
            <h:column>
                <f:facet name="header" >LOCATION</f:facet>
                    #{car.location}
            </h:column>
        </h:dataTable>



    </h:body>
</html>

